<!DOCTYPE html>
<html lang="en">

<head>
    <script>
        
        function createOTP(clientID)
        {
            xhr = new XMLHttpRequest();
            var url = "http://localhost:5001/genotp";
            xhr.open("POST", url, true);
            xhr.setRequestHeader("Content-type", "application/json");
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var json = JSON.parse(xhr.responseText);
                    console.log(json);
                    document.getElementById('otp').innerText = "OTP pin sent to notification subsystem: " + json.otp;
                }
            }
            var data = JSON.stringify({ "clientID": clientID});
            xhr.send(data);
        }

        function validateOTP(clientID,otp)
        {
            xhr = new XMLHttpRequest();
            var url = "http://localhost:5001/validate";
            xhr.open("POST", url, true);
            xhr.setRequestHeader("Content-type", "application/json");
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var json = JSON.parse(xhr.responseText);
                    console.log(json);
                    document.getElementById('pinValid').innerHTML = "Pin is:" + json.status;
                }
            }
            var data = JSON.stringify({ "clientID": clientID, "otp": otp });
            xhr.send(data);
        }

        /*function createOTP(clientID)
        {
            xhr = new XMLHttpRequest();
            var url = "https://otp-ocean.herokuapp.com/genotp";
            //var url = "http://localhost:5001/genotp";
            xhr.open("POST", url, true);
            xhr.setRequestHeader("Content-type", "application/json");
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var json = JSON.parse(xhr.responseText);
                    console.log(json);
                    //document.getElementById('otp').innerText = "OTP pin sent to notification subsystem: " + json.otp;
                }
            }
            var data = JSON.stringify({ "clientID": clientID});
            xhr.send(data);
        }

        function validateOTP(clientID,otp)
        {
            xhr = new XMLHttpRequest();
            var url = "https://otp-ocean.herokuapp.com/validate";
            xhr.open("POST", url, true);
            xhr.setRequestHeader("Content-type", "application/json");
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var json = JSON.parse(xhr.responseText);
                    console.log(json);
                    document.getElementById('pinValid').innerHTML = "Pin is:" + json.status;
                }
            }
            var data = JSON.stringify({ "clientID": clientID, "otp": otp });
            xhr.send(data);
        }*/
    </script>
    <title>
        Mock Test
    </title>
</head>

<body>
    <h1>
        Demo Purpose Page
    </h1>
            <button onclick="createOTP('1')">Generate Pin</button>
            <p id="otp">OTP pin sent to notification subsystem: </p>
            <input id='otpUser' type="text"/>
            <button onclick="validateOTP('1',document.getElementById('otpUser').value)">Validate</button>
            <p id="pinValid">Pin is:</p>
        <br/>
            <h2>Get Logs for given dates</h2>
            <label>From Date</label>
            <input id="fromDate" type="datetime-local" name="fromDate">
            <label>To Date</label>
            <input id="toDate" type="datetime-local" name="toDate">
            <button onclick="getLogs(document.getElementById('fromDate').value,document.getElementById('toDate').value)">Validate</button>
            <h2>
                Logs
            </h2>
            <p id="logs"></p>
</body>

</html>
